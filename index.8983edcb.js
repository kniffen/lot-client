const e=new URLSearchParams(location.search),t=e.get("api-url"),r=e.get("vapid");navigator.serviceWorker?.register("/sw.ts").then(e=>{console.log("registered",e),n(e)}).catch(e=>console.error(e,"registration failed"));const n=e=>{if(!r)return;let t=o(r);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(e=>{console.log("User is subscribed:",e)}).catch(e=>{console.log("Failed to subscribe the user: ",e)})},o=e=>{let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),o=new Uint8Array(n.length);for(let e=0;e<n.length;++e)o[e]=n.charCodeAt(e);return o},c=new URL(`${t}/ping/${location.search.toString()}`);document.getElementById("ping-btn")?.addEventListener("click",e=>{e.preventDefault(),fetch(c,{method:"POST"}).then(console.log).catch(console.error)});
//# sourceMappingURL=index.8983edcb.js.map
