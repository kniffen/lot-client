const e=new URLSearchParams(location.search),r=e.get("api-url"),t=e.get("vapid");navigator.serviceWorker?.register("/sw.ts").then(e=>{console.log("registered",e),o(e)}).catch(e=>console.error(e,"registration failed"));const o=e=>{if(!t)return;let r=n(t);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r}).then(e=>{console.log("User is subscribed:",e)}).catch(e=>{console.log("Failed to subscribe the user: ",e)})},n=e=>{let r="=".repeat((4-e.length%4)%4),t=(e+r).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(t),n=new Uint8Array(o.length);for(let e=0;e<o.length;++e)n[e]=o.charCodeAt(e);return n},c=new URL(`${r}/ping/${location.search.toString()}`);document.getElementById("ping-btn")?.addEventListener("click",e=>{e.preventDefault(),fetch(c,{method:"POST",mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}}).then(console.log).catch(console.error)});
//# sourceMappingURL=index.7c8ac92f.js.map
